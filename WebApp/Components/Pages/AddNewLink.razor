@page "/AddNewLink"
@rendermode InteractiveServer
@using System.Text.Json
@using WebApp.Helpers
@inject LocalStorageService LocalStorage
@inject NavigationManager Navigation

<h3>AddNewLink</h3>


<form method="post" @onsubmit="Submit">
    <label>Link: 
        <InputText @bind-Value="link">
            
        </InputText>
    </label>
    <button type="submit">Add new link</button>
</form>

@code {
    public string link;

    private async void Submit()
    {
        var storeItems = await LocalStorage.GetItem("items");

        var links = JsonSerializer.Deserialize<List<string>>(storeItems);
        
        links.Add(link);

        await LocalStorage.AddLink("items", JsonSerializer.Serialize(links));
        Navigation.NavigateTo("Weather");
    }
}